[Unit]
Description=Arkime Capture
After=network.target opensearch.service elasticsearch.service

[Service]
Type=simple
Restart=on-failure
StandardOutput=tty
EnvironmentFile=-BUILD_ARKIME_INSTALL_DIR/etc/capture.env
ExecStartPre=-BUILD_ARKIME_INSTALL_DIR/bin/arkime_config_interfaces.sh -c BUILD_ARKIME_INSTALL_DIR/etc/config.ini -n default
# Modify BUILD_ARKIME_INSTALL_DIR/etc/capture.env instead of ExecStart
ExecStart=BUILD_ARKIME_INSTALL_DIR/bin/capture -c BUILD_ARKIME_INSTALL_DIR/etc/config.ini ${OPTIONS}
WorkingDirectory=BUILD_ARKIME_INSTALL_DIR
# Logging
SyslogIdentifier=arkimecapture
# Command these two lines if you want to use systemd journal
StandardOutput=append:BUILD_ARKIME_INSTALL_DIR/logs/wise.log
StandardError=append:BUILD_ARKIME_INSTALL_DIR/logs/wise.log

LimitCORE=infinity
LimitMEMLOCK=infinity

[Install]
WantedBy=multi-user.target
